<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • testdat</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://socialresearchcentre.github.io/testdat/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">testdat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/testdat.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/socialresearchcentre/testdat/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/socialresearchcentre/testdat/blob/master/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.3" id="testdat-043">testdat 0.4.3<small>2025-08-19</small><a class="anchor" aria-label="anchor" href="#testdat-043"></a></h2>
<ul><li><p><code><a href="../reference/conditional-expectations.html">expect_base()</a></code> now errors when <code>var</code> doesn’t exist in the test data instead of passing (<a href="https://github.com/socialresearchcentre/testdat/issues/71" class="external-link">#71</a>, <a href="https://github.com/lachlangh" class="external-link">@lachlangh</a>).</p></li>
<li><p>Expectations are now created using <code><a href="https://testthat.r-lib.org/reference/expectation.html" class="external-link">new_expectation()</a></code> to prepare for upcoming changes in testthat 3.3.0 (<a href="https://github.com/socialresearchcentre/testdat/issues/78" class="external-link">#78</a>, <a href="https://github.com/hadley" class="external-link">@hadley</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.2" id="testdat-042">testdat 0.4.2<small>2023-09-03</small><a class="anchor" aria-label="anchor" href="#testdat-042"></a></h2>
<ul><li><p><code><a href="../reference/global-data.html">get_testdata()</a></code> now removes groups from the test data frame if it is a <code>grouped_df</code> (<a href="https://github.com/socialresearchcentre/testdat/issues/68" class="external-link">#68</a>). Grouped data frames cause issues with several expectations.</p></li>
<li><p>Fix for upcoming R-devel change.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.1" id="testdat-041">testdat 0.4.1<small>2022-08-25</small><a class="anchor" aria-label="anchor" href="#testdat-041"></a></h2>
<ul><li>Updated the failure message on <code><a href="../reference/generic-expectations.html">expect_all()</a></code> to include more specific information on the location of erring values. In particular, variables failing the test are now highlighted in the error message. If, for instance, only one of three variables passed in as the <code>vars</code> argument fails the test, then only that variable will be mentioned as failing the test in the failure message. This makes it easier to track down the cause of expectation failures when checking multiple variables at once. For example,</li>
</ul><div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">expect_all</span>(<span class="fu">everything</span>(), is.numeric, <span class="at">data =</span> iris)<span class="sc">:</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="co">#&gt; Error: `iris` has 150 records failing  `is.numeric` on variable `Species`.</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="co">#&gt;  Vars: everything()</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co">#&gt;  Filter: None</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co">#&gt;  Arguments: `` </span></span></code></pre></div>
<p><code><a href="../reference/generic-expectations.html">expect_all()</a></code> sits behind many other expectations, which will also see a change to their failure message.</p>
<ul><li><p>Soft deprecated <code><a href="../reference/expect-deprec.html">expect_allany()</a></code>. This function was implemented purely as a back-end for <code><a href="../reference/generic-expectations.html">expect_all()</a></code> and <code><a href="../reference/generic-expectations.html">expect_any()</a></code>. The change to <code><a href="../reference/generic-expectations.html">expect_all()</a></code> mentioned above differentiates it from <code><a href="../reference/generic-expectations.html">expect_any()</a></code> so that the two functions can no longer share a common back-end. Hence <code><a href="../reference/expect-deprec.html">expect_allany()</a></code> is now redundant.</p></li>
<li><p>Added <code><a href="../reference/expect_depends.html">expect_depends()</a></code> which allows you to test for functional dependency among variables. See the <a href="https://en.wikipedia.org/wiki/Functional_dependency" class="external-link">wikipedia page</a> for more information about functional dependencies.</p></li>
<li><p>Fixed a bug that was causing a corrupted excel file to be produced by <code><a href="../reference/output_results_excel.html">output_results_excel()</a></code> if the test suite encountered an error (<a href="https://github.com/socialresearchcentre/testdat/issues/56" class="external-link">#56</a>).</p></li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.4.0" id="testdat-040">testdat 0.4.0<small>2022-01-04</small><a class="anchor" aria-label="anchor" href="#testdat-040"></a></h2>
<ul><li>testdat now has a test data pipe (<a href="https://github.com/socialresearchcentre/testdat/issues/60" class="external-link">#60</a>)! You can use the test data pipe <code>%E&gt;%</code> to add expectations to a pipe chain.</li>
</ul><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="../reference/global-data.html">%E&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/conditional-expectations.html">expect_base</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op"><a href="../reference/global-data.html">%E&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/conditional-expectations.html">expect_base</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This is a shorthand way of piping into the <code><a href="../reference/global-data.html">with_testdata()</a></code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/global-data.html">with_testdata</a></span><span class="op">(</span><span class="fu"><a href="../reference/conditional-expectations.html">expect_base</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>mpg <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/global-data.html">with_testdata</a></span><span class="op">(</span><span class="fu"><a href="../reference/conditional-expectations.html">expect_base</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ul><li>
<code><a href="../reference/global-data.html">set_testdata()</a></code> previously always returned a data frame, and evaluated the test data if it was stored as a quosure. It now returns the data as it was stored, to get around a bug when piping data into the <code><a href="../reference/global-data.html">with_testdata()</a></code> function (<a href="https://github.com/socialresearchcentre/testdat/issues/60" class="external-link">#60</a>).</li>
</ul></div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.3.0" id="testdat-030">testdat 0.3.0<small>2021-11-12</small><a class="anchor" aria-label="anchor" href="#testdat-030"></a></h2>
<div class="section level3">
<h3 id="breaking-changes-0-3-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-3-0"></a></h3>
<div class="section level4">
<h4 id="tidyselect-0-3-0">tidyselect (<a href="https://github.com/socialresearchcentre/testdat/issues/36" class="external-link">#36</a>)<a class="anchor" aria-label="anchor" href="#tidyselect-0-3-0"></a></h4>
<p>As of testdat 0.3.0 we have moved to the <a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidyselect</a> framework for variable selections instead of <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">dplyr::vars()</a></code>. tidyselect is the successor to <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> - it’s a bit cleaner, provides some nifty features like selecting columns with a predicate function using <code><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where()</a></code> and finally allows us to get rid of the distinction between multi and single variable expectations.</p>
<p>Unfortunately this will break some code, but it’s horrendously difficult to support both methods and it’s best to switch before publishing to CRAN. Fortunately it’s a simple fix - anywhere that you are currently using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code>, replace it with <code><a href="https://rdrr.io/r/base/c.html" class="external-link">c()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Old</span></span>
<span><span class="fu"><a href="../reference/uniqueness-expectations.html">expect_unique</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># New</span></span>
<span><span class="fu"><a href="../reference/uniqueness-expectations.html">expect_unique</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The affected expectations are:</p>
<ul><li><p>The uniqueness expectations: <code><a href="../reference/uniqueness-expectations.html">expect_unique()</a></code>, <code><a href="../reference/uniqueness-expectations.html">expect_unique_across()</a></code>, <code><a href="../reference/uniqueness-expectations.html">expect_unique_combine()</a></code></p></li>
<li><p>The exclusivity expectation: <code><a href="../reference/exclusivity-expectations.html">expect_exclusive()</a></code></p></li>
<li><p>The generic expectation helpers: <code><a href="../reference/generic-expectations.html">expect_all()</a></code>, <code><a href="../reference/generic-expectations.html">expect_any()</a></code>, <code><a href="../reference/expect-deprec.html">expect_allany()</a></code></p></li>
<li><p>The checking helper functions: <code><a href="../reference/chk-helper.html">chk_filter()</a></code>, <code><a href="../reference/chk-defunct.html">chk_filter_vars()</a></code>, <code><a href="../reference/chk-helper.html">chk_filter_all()</a></code>, <code><a href="../reference/chk-helper.html">chk_filter_any()</a></code></p></li>
</ul><p>A small number of functions have been hard deprecated as they are now redundant:</p>
<ul><li><p><code><a href="../reference/expect-defunct.html">expect_where()</a></code> and <code><a href="../reference/chk-defunct.html">chk_filter_where()</a></code> have been hard deprecated. They are now equivalent to the corresponding <code>*_all()</code> function.</p></li>
<li><p><code><a href="../reference/chk-defunct.html">chk_filter_vars()</a></code> has been renamed to <code><a href="../reference/chk-helper.html">chk_filter()</a></code> and the existing <code><a href="../reference/chk-helper.html">chk_filter()</a></code> has been removed to simplify the set of generic checking functions.</p></li>
</ul><p>Auto-generated expectations have also changed slightly - previously they could either accept a single unquoted variable name or a group of variables specified with <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code>. They now always accept multiple columns using tidyselect syntax. As a result, the name of the first argument for these expect has changed from <code>var</code> to <code>vars</code>, so be careful if you’re using this as a named argument.</p>
<p>tidyselect syntax allows single unquoted variable names as well as arbitrary groups of variable specifications, and all of the auto-generated expectations in the package used the single variable variant so this shouldn’t break existing code.</p>
<p>These are all valid column specifications using tidyselect:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/value-expectations.html">expect_values</a></span><span class="op">(</span><span class="va">a</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/value-expectations.html">expect_values</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/value-expectations.html">expect_values</a></span><span class="op">(</span><span class="va">a</span><span class="op">:</span><span class="va">c</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/value-expectations.html">expect_values</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"^[ab]$"</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/value-expectations.html">expect_values</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">matches</a></span><span class="op">(</span><span class="st">"^[ab]$"</span><span class="op">)</span>, <span class="va">c</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/value-expectations.html">expect_values</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html" class="external-link">where</a></span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="others-0-3-0">Others<a class="anchor" aria-label="anchor" href="#others-0-3-0"></a></h4>
<ul><li><p><code><a href="../reference/exclusivity-expectations.html">expect_exclusive()</a></code> has much improved documentation, and has had the argument name <code>exc_vars</code> updated to <code>var_set</code> to better reflect its purpose.</p></li>
<li><p><code>chk_pattern()</code> has been renamed to <code><a href="../reference/chk-patterns.html">chk_regex()</a></code> to better reflect its purpose.</p></li>
</ul></div>
</div>
<div class="section level3">
<h3 id="deprecations-0-3-0">Deprecations<a class="anchor" aria-label="anchor" href="#deprecations-0-3-0"></a></h3>
<ul><li><p>Soft deprecated <code><a href="../reference/reporter-deprec.html">context_data()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/43" class="external-link">#43</a>). <code><a href="../reference/reporter-deprec.html">context_data()</a></code> is just a wrapper for <code><a href="../reference/global-data.html">set_testdata()</a></code>, which has a much more intuitive name.</p></li>
<li><p>Soft deprecated <code><a href="../reference/expect-deprec.html">expect_similar()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/18" class="external-link">#18</a>). It was a silly way of comparing data frames and we’re better off making something new.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes--minor-updates-0-3-0">Bug fixes / minor updates<a class="anchor" aria-label="anchor" href="#bug-fixes--minor-updates-0-3-0"></a></h3>
<ul><li><p><code><a href="../reference/chk-values.html">chk_blank()</a></code> performs checks slightly differently and is much faster as a result (<a href="https://github.com/socialresearchcentre/testdat/issues/46" class="external-link">#46</a>).</p></li>
<li><p><code><a href="../reference/chk-text.html">chk_ascii()</a></code> was returning <code>FALSE</code> if it detected non-ASCII printable characters anywhere in the input vector. It now checks each element of the vector individually.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.2.0" id="testdat-020">testdat 0.2.0<a class="anchor" aria-label="anchor" href="#testdat-020"></a></h2>
<p>In addition to minor updates and bug fixes, this release does three main things: * Behind the scenes, it (a) reorganises and refactors the code base to reduce redundancies and improve clarity, and (b) significantly builds out the testing infrastructure. * On the wings, it expands the documentation for existing functions considerably. * At centre stage, it extends the <code>expect_*()</code> framework, e.g. by introducing ‘fuzzy’ expectations in the form of <code>expect_prop_*()</code>.</p>
<div class="section level3">
<h3 id="breaking-changes-0-2-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-2-0"></a></h3>
<ul><li>Renamed arguments in <code><a href="../reference/chk-helper.html">chk_filter()</a></code> and <code>chk_filter_*()</code> functions to remove the <code>.</code> prefix to bring them into line with the expectation functions (<a href="https://github.com/socialresearchcentre/testdat/issues/9" class="external-link">#9</a>).</li>
</ul></div>
<div class="section level3">
<h3 id="deprecations-0-2-0">Deprecations<a class="anchor" aria-label="anchor" href="#deprecations-0-2-0"></a></h3>
<ul><li><p>Retired <code><a href="../reference/expect-defunct.html">filter_expect()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/25" class="external-link">#25</a>).</p></li>
<li><p>Hard deprecated <code><a href="../reference/chk-deprec.html">chk_length()</a></code>, <code><a href="../reference/chk-deprec.html">chk_miss()</a></code> and <code><a href="../reference/chk-deprec.html">chk_nmiss()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/5" class="external-link">#5</a>).</p></li>
<li><p>Soft deprecated <code><a href="../reference/expect-deprec.html">expect_func()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/24" class="external-link">#24</a>).</p></li>
<li><p>Soft deprecated <code><a href="../reference/expect-deprec.html">expect_join()</a></code> in favour of <code><a href="../reference/datacomp-expectations.html">expect_subset()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/21" class="external-link">#21</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="additions-0-2-0">Additions<a class="anchor" aria-label="anchor" href="#additions-0-2-0"></a></h3>
<ul><li><p>Added <code><a href="../reference/chk-defunct.html">chk_filter_where()</a></code> and <code><a href="../reference/expect-defunct.html">expect_where()</a></code> which can be used to perform scoped expectations (<a href="https://github.com/socialresearchcentre/testdat/issues/8" class="external-link">#8</a>).</p></li>
<li><p>Added <code><a href="../reference/uniqueness-expectations.html">expect_unique_combine()</a></code> for checking uniqueness across a combination of variables (<a href="https://github.com/socialresearchcentre/testdat/issues/22" class="external-link">#22</a>).</p></li>
<li><p>Added <code>expect_prop_*()</code> functions for ‘fuzzy’ expectations. An example is <code><a href="../reference/proportion-expectations.html">expect_prop_nmiss()</a></code> which can be used to validate a dataset allowing for a certain amount of missingness (<a href="https://github.com/socialresearchcentre/testdat/issues/12" class="external-link">#12</a>).</p></li>
<li><p>Added <code><a href="../reference/label-expectations.html">expect_labels()</a></code> for testing variable and value labels (<a href="https://github.com/socialresearchcentre/testdat/issues/20" class="external-link">#20</a>).</p></li>
<li><p>Added <code>exclude</code> argument to <code><a href="../reference/uniqueness-expectations.html">expect_unique()</a></code> and <code>expect_unique_*()</code> to allow users to exclude specific values from the uniqueness check. This is particularly useful when the dataset contains missing codes (<a href="https://github.com/socialresearchcentre/testdat/issues/26" class="external-link">#26</a>).</p></li>
<li><p>Added <code>quosure</code> argument to <code>use_testdata()</code> (<a href="https://github.com/socialresearchcentre/testdat/issues/1" class="external-link">#1</a>). This allows the dataset to be specified as a quosure, so all tests will be run against the current version.</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-0"></a></h3>
<ul><li><p>Fixed bug in <code><a href="../reference/chk-helper.html">chk_filter()</a></code> which prevented the user from using <code>vars = vars(everything())</code>.</p></li>
<li><p>Fixed deprecation warning that cropped up when using <code>expect_similar</code> (<a href="https://github.com/socialresearchcentre/testdat/issues/19" class="external-link">#19</a>).</p></li>
<li><p>Fixed bug in <code><a href="../reference/expect-deprec.html">expect_similar()</a></code> which prevented variables with different names from being compared (<a href="https://github.com/socialresearchcentre/testdat/issues/17" class="external-link">#17</a>).</p></li>
<li><p>Fixed deprecation warning that cropped up when using <code>chk_text_nmiss</code> (<a href="https://github.com/socialresearchcentre/testdat/issues/16" class="external-link">#16</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="other-minor-changes-0-2-0">Other minor changes<a class="anchor" aria-label="anchor" href="#other-minor-changes-0-2-0"></a></h3>
<ul><li><p>Documentation for existing functions has been expanded considerably.</p></li>
<li><p>Added <code>...</code> argument to <code><a href="../reference/chk-values.html">chk_range()</a></code> to bring it into line with <code><a href="../reference/value-expectations.html">expect_range()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/28" class="external-link">#28</a>).</p></li>
<li><p>Refactored <code><a href="../reference/value-expectations.html">expect_values()</a></code> to implement it using <code><a href="../reference/expect_make.html">expect_make()</a></code> (<a href="https://github.com/socialresearchcentre/testdat/issues/27" class="external-link">#27</a>).</p></li>
<li><p>Added a new <code>testdat.scipen</code> (default: <code>999</code>) to avoid issues from checks converting numeric variables to scientific notation (<a href="https://github.com/socialresearchcentre/testdat/issues/3" class="external-link">#3</a>).</p></li>
<li><p>Added &gt;= 0.8.0 dplyr version dependency (<a href="https://github.com/socialresearchcentre/testdat/issues/2" class="external-link">#2</a>).</p></li>
<li><p>All calls to <code><a href="https://rlang.r-lib.org/reference/quo_label.html" class="external-link">quo_label()</a></code> now use <code><a href="https://rlang.r-lib.org/reference/as_label.html" class="external-link">as_label()</a></code> instead as recommended by rlang (<a href="https://github.com/socialresearchcentre/testdat/issues/10" class="external-link">#10</a>). This may cause minor changes to printing of test results.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.1.0" id="testdat-010">testdat 0.1.0<a class="anchor" aria-label="anchor" href="#testdat-010"></a></h2>
<p>Initial release.</p>
<div class="section level3">
<h3 id="major-changes-from-early-development-releases-0-1-0">Major changes from early development releases<a class="anchor" aria-label="anchor" href="#major-changes-from-early-development-releases-0-1-0"></a></h3>
<ul><li><p>Removed <code>start_data_test()</code> and <code>end_data_test()</code> as they don’t have a clear use case.</p></li>
<li><p>Added a new <code><a href="../reference/global-data.html">with_testdata()</a></code> function for simpler interactive testing.</p></li>
<li><p>Moved <code>use_testdat()</code> into srcproj, it’s a more natural home.</p></li>
<li><p>Removed <code>ExcelReporter</code>, it is unnecessary since we have Excel output from a ListReporter.</p></li>
<li><p>New expectation function factory <code><a href="../reference/expect_make.html">expect_make()</a></code> allows users to automagically convert a logical check function of the form used by <code>chk_*()</code> into an expectation. See <code><a href="../reference/expect_make.html">?expect_make</a></code> for details.</p></li>
<li><p><code><a href="../reference/chk-values.html">chk_values()</a></code> now takes the vector of missing values as an argument instead of a logical.</p></li>
<li>
<p>Renamed some <code>chk_*()</code> functions for clarity. For the moment the old names are soft-deprecated and will give a warning, <em>these will be hard-deprecated in the next minor release</em>.</p>
<ul><li><p><code><a href="../reference/chk-deprec.html">chk_length()</a></code> =&gt; <code><a href="../reference/chk-patterns.html">chk_max_length()</a></code></p></li>
<li><p><code><a href="../reference/chk-deprec.html">chk_miss()</a></code> =&gt; <code><a href="../reference/chk-text.html">chk_text_miss()</a></code></p></li>
<li><p><code><a href="../reference/chk-deprec.html">chk_nmiss()</a></code> =&gt; <code><a href="../reference/chk-text.html">chk_text_nmiss()</a></code></p></li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="minor-changes-0-1-0">Minor changes<a class="anchor" aria-label="anchor" href="#minor-changes-0-1-0"></a></h3>
<ul><li>
<p>Added new expectations and options:</p>
<ul><li><p><code><a href="../reference/value-expectations.html">expect_range()</a></code> now takes extra allowable values in <code>...</code>. Specifically for cases where there is a bounded range with specified values outside (e.g. missing value codes).</p></li>
<li><p><code><a href="../reference/conditional-expectations.html">expect_base()</a></code> has a new flag <code>missing_valid</code>. If set to <code>TRUE</code>, missing values are considered valid responses for records that meet the base condition. This allows for one-way base checks, i.e. records <em>not</em> meeting the base condition should be missing, but for records meeting the base condition we don’t care.</p></li>
</ul></li>
<li><p>Extensive cleanup of rlang usage to follow better practices. Expression capture for expectation messages should be much cleaner.</p></li>
<li><p>Simplified dependencies.</p></li>
<li><p>Documentation cleanup.</p></li>
<li><p>Remove R CMD Check warnings.</p></li>
<li><p>Improved test coverage</p></li>
</ul></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Danny Smith, Kinto Behr.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

